## 存储控制器 (2017.12.08)
## 存储控制器作用
![存储控制器作用](https://github.com/GalenDeng/Embedded-Linux/blob/master/9.%20%E5%AD%98%E5%82%A8%E6%8E%A7%E5%88%B6%E5%99%A8/%E5%AD%98%E5%82%A8%E6%8E%A7%E5%88%B6%E5%99%A8%E4%BD%9C%E7%94%A8.JPG)
* cpu不管外设是啥东西，它是通过存储管理器和外设(如:SDRAM,网卡DM9000)进行沟通的,存储管理
* 器根据配置文件知道外设的各个地址,进而分辨他们,这时外设应该：发送片选信号 => 发送bank选择信号 => 发送列地址 => 发送行地址 => ...  
## SDRAM的结构图
* bank0,bank1这些我们可以理解为不同的块
* bank => 行地址(row) => 列地址(column)
![SDRAM的结构图](https://github.com/GalenDeng/Embedded-Linux/blob/master/9.%20%E5%AD%98%E5%82%A8%E6%8E%A7%E5%88%B6%E5%99%A8/SDRAM%E7%9A%84%E7%BB%93%E6%9E%84%E5%9B%BE.JPG)
## 访问一个芯片需要的条件
![访问一个芯片需要的条件](https://github.com/GalenDeng/Embedded-Linux/blob/master/9.%20%E5%AD%98%E5%82%A8%E6%8E%A7%E5%88%B6%E5%99%A8/%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E8%8A%AF%E7%89%87%E9%9C%80%E8%A6%81%E7%9A%84%E6%9D%A1%E4%BB%B6.JPG)
* 地址线、数据线、时钟/频率、相关芯片信息、刷新周期、数据位宽
* 位宽 ： 看原理图
* 刷新周期、行地址、列地址、bank : 看内存芯片手册
* 从 S3C2440的芯片手册查看,确定使用哪个port来和内存芯片(K4S561632N)的bank连接
## s3c2440的cpu和内存芯片K4S561632N的连接方式
![s3c2440和内存芯片的连接方式](https://github.com/GalenDeng/Embedded-Linux/blob/master/9.%20%E5%AD%98%E5%82%A8%E6%8E%A7%E5%88%B6%E5%99%A8/s3c2440%E5%92%8C%E5%86%85%E5%AD%98%E8%8A%AF%E7%89%87%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F.JPG)
* 相对应的s3c2440芯片手册介绍
* ![s3c2440的内存地址总线连接方式](https://github.com/GalenDeng/Embedded-Linux/blob/master/9.%20%E5%AD%98%E5%82%A8%E6%8E%A7%E5%88%B6%E5%99%A8/s3c2440%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E6%80%BB%E7%BA%BF%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F.JPG)
* 网卡和nor flash 术语上叫做 RAM like
* SRAM : 贵，操作简单，直接读写 ; SDRAM : 需要 bank地址、行地址、列地址、刷新频率
* 网卡，nor flash 可以用bank0-bank5 ; SDRAM  bank6-bank7